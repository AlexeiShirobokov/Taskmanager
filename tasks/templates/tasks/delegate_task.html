<!-- templates/tasks/delegate_task.html -->
{% extends 'base.html' %}
{% block title %}Делегировать задачу{% endblock %}
{% block content %}
  <h2 class="title is-4">Делегировать задачу: {{ task.title }}</h2>

  <div class="box">
    <form method="post">
      {% csrf_token %}

      <div class="field">
        <label class="label">Текущий ответственный:</label>
        <div class="control">
          <input type="text" class="input" value="{{ task.responsible.get_full_name|default:task.responsible.username }}" disabled>
        </div>
      </div>

      <div class="field">
        <label class="label">Новый ответственный:</label>
        <div class="control">
          <select name="new_responsible" class="select" required>
            <option value="">Выберите пользователя</option>
            {% for user in users %}
              <option value="{{ user.id }}">{{ user.get_full_name|default:user.username }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="field">
        <div class="control">
          <button type="submit" class="button is-primary">Делегировать задачу</button>
          <a href="{% url 'task_detail' task.pk %}" class="button is-light">Отмена</a>
        </div>
      </div>
    </form>
  </div>
{% endblock %}